<html>
  <head>
    <title>Sample web application</title>
    <link rel="stylesheet" type="css/text" media="screen" href="sample.css"/>
  </head>
  <body>
    <form id="formId">
      Name
      <input type="text" name="first" id="first"  />
      <input type="text" name="last" id="last"  />
      <input type="submit" value="send" />
    </form>
    <form id="searchForm">
      Search
      <input type="text" name="name" id="nameSearch"  />
      <input type="submit" value="search" />
    </form>

    <div id="response">
    </div>

    <script src="js/common.js"></script>
    <script>

function getValue(id) {
  var element = document.getElementById(id);
  return element && element.value;
}

function onSearch(e) {
  e.preventDefault();

  var ajax = new Ajax();
  ajax.addField('nameSearch');
  ajax.send('/search', onSearchResults, onError);
}

function onSearchResults(responseJson) {
  var response = JSON.parse(responseJson);
  var list = document.createElement('ol');
  for (var i = 0; i < response.length; i++) {
    var item = document.createElement('li');
    item.innerHTML = response[i].Time;
    list.appendChild(item);
  }
  var container = document.getElementById('response');
  container.appendChild(list);
}

function onFormSubmit(e) {
  e.preventDefault();

  var ajax = new Ajax();
  var request = {first: getValue('first'), last: getValue('last')};
  ajax.addParam('nameJson', JSON.stringify(request));
  ajax.send('/hello', onResponse, onError);
}

function onResponse(response) {
  var responseElement = document.getElementById('response');
  responseElement.innerHTML = response;
}

function onError() {
  alert('Something went wrong');
}

function init() {
  var form = document.getElementById('formId');
  form.addEventListener('submit', onFormSubmit);
  var searchForm = document.getElementById('searchForm');
  searchForm.addEventListener('submit', onSearch);
}

window.addEventListener('load', init);

    </script>
  </body>
</html>
